!function(t){var b={};function _(e){if(b[e])return b[e].exports;var a=b[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,_),a.l=!0,a.exports}_.m=t,_.c=b,_.d=function(t,b,e){_.o(t,b)||Object.defineProperty(t,b,{enumerable:!0,get:e})},_.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},_.t=function(t,b){if(1&b&&(t=_(t)),8&b)return t;if(4&b&&"object"==typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(_.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&b&&"string"!=typeof t)for(var a in t)_.d(e,a,function(b){return t[b]}.bind(null,a));return e},_.n=function(t){var b=t&&t.__esModule?function(){return t.default}:function(){return t};return _.d(b,"a",b),b},_.o=function(t,b){return Object.prototype.hasOwnProperty.call(t,b)},_.p="",_(_.s=0)}([function(t,b,_){"use strict";_.r(b);_(1),_(2),_(3),_(4),_(5),_(6),_(7)},function(t,b,_){"use strict";window.bt_bb_edit_layout=function(){let t=jQuery;var b=bt_bb_get_obj_by_id(window.bt_bb_state_current,window.bt_bb_from),_="",e="",a="",i="",n="";for(let t=0;t<b.children.length;t++){var o=window.bt_bb_map[b.children[t].base].width_param,d=attr_to_obj(b.children[t].attr);void 0!==d&&void 0!==d[o]&&(_+=d[o]),void 0!==d&&void 0!==d.width_lg&&(e+=d.width_lg),void 0!==d&&void 0!==d.width_md&&(a+=d.width_md),void 0!==d&&void 0!==d.width_sm&&(i+=d.width_sm),void 0!==d&&void 0!==d.width_xs&&(n+=d.width_xs),t<b.children.length-1&&(void 0!==d&&void 0!==d[o]&&""!==d[o]&&(_+="+"),void 0!==d&&void 0!==d.width_lg&&""!==d.width_lg&&(e+="+"),void 0!==d&&void 0!==d.width_md&&""!==d.width_md&&(a+="+"),void 0!==d&&void 0!==d.width_sm&&""!==d.width_sm&&(i+="+"),void 0!==d&&void 0!==d.width_xs&&""!==d.width_xs&&(n+="+"))}t("#bt_bb_dialog").addClass("bt_bb_dialog_add_horizontal");t("#bt_bb_dialog .bt_bb_dialog_content").html('<div class="bt_bb_dialog_pick_layout_container"><span class="bt_bb_dialog_pick_layout bt_bb_dialog_11" title="1/1"></span><span class="bt_bb_dialog_pick_layout bt_bb_dialog_12_12" title="1/2+1/2"></span><span class="bt_bb_dialog_pick_layout bt_bb_dialog_13_13_13" title="1/3+1/3+1/3"></span><span class="bt_bb_dialog_pick_layout bt_bb_dialog_14_14_14_14" title="1/4+1/4+1/4+1/4"></span><span class="bt_bb_dialog_pick_layout bt_bb_dialog_15_15_15_15_15" title="1/5+1/5+1/5+1/5+1/5"></span><span class="bt_bb_dialog_pick_layout bt_bb_dialog_23_13" title="2/3+1/3"></span><span class="bt_bb_dialog_pick_layout bt_bb_dialog_13_23" title="1/3+2/3"></span><span class="bt_bb_dialog_pick_layout bt_bb_dialog_34_14" title="3/4+1/4"></span><span class="bt_bb_dialog_pick_layout bt_bb_dialog_14_34" title="1/4+3/4"></span><span class="bt_bb_dialog_pick_layout bt_bb_dialog_14_24_14" title="1/4+2/4+1/4"></span></div><div class="bt_bb_dialog_enter_layout_container"><div class="bt_bb_edit_layout_xl"><b>&gt;1200px</b><input type="text" class="bt_bb_dialog_enter_layout bt_bb_dialog_enter_layout_xl"></div><div class="bt_bb_edit_layout_lg"><b>993-1200px</b><input type="text" class="bt_bb_dialog_enter_layout bt_bb_dialog_enter_layout_lg" placeholder="---"></div><div class="bt_bb_edit_layout_md"><b>769-992px</b><input type="text" class="bt_bb_dialog_enter_layout bt_bb_dialog_enter_layout_md" placeholder="---"></div><div class="bt_bb_edit_layout_sm"><b>481-768px</b><input type="text" class="bt_bb_dialog_enter_layout bt_bb_dialog_enter_layout_sm" placeholder="---"></div><div class="bt_bb_edit_layout_xs"><b>&le;480px</b><input type="text" class="bt_bb_dialog_enter_layout bt_bb_dialog_enter_layout_xs" placeholder="---"></div></div>'),t("#bt_bb_dialog").append('<input type="button" class="bt_bb_dialog_button bt_bb_edit button button-small" value="'+window.bt_bb_text.submit+'">'),""!=_&&t(".bt_bb_dialog_enter_layout_xl").val(_),""!=e&&t(".bt_bb_dialog_enter_layout_lg").val(e),""!=a&&t(".bt_bb_dialog_enter_layout_md").val(a),""!=i&&t(".bt_bb_dialog_enter_layout_sm").val(i),""!=n&&t(".bt_bb_dialog_enter_layout_xs").val(n),t(".bt_bb_dialog_pick_layout").click(function(b){var _=t(this).attr("title").replace(/\s/gm,"");t(".bt_bb_dialog_enter_layout").parent().removeClass("bt_bb_layout_error_alert"),t(".bt_bb_dialog_enter_layout").val(_),"bt_bb_row"!=window.bt_bb_base&&"bt_bb_row_inner"!=window.bt_bb_base||("1/2+1/2"==_?t(".bt_bb_dialog_enter_layout_xs").val("1/1+1/1"):"1/3+1/3+1/3"==_?(t(".bt_bb_dialog_enter_layout_xs").val("1/1+1/1+1/1"),t(".bt_bb_dialog_enter_layout_sm").val("1/1+1/1+1/1"),t(".bt_bb_dialog_enter_layout_md").val("1/1+1/1+1/1")):"1/4+1/4+1/4+1/4"==_?(t(".bt_bb_dialog_enter_layout_xs").val("1/1+1/1+1/1+1/1"),t(".bt_bb_dialog_enter_layout_sm").val("1/2+1/2+1/2+1/2"),t(".bt_bb_dialog_enter_layout_md").val("1/2+1/2+1/2+1/2")):"2/3+1/3"==_?(t(".bt_bb_dialog_enter_layout_xs").val("1/1+1/1"),t(".bt_bb_dialog_enter_layout_sm").val("1/1+1/1"),t(".bt_bb_dialog_enter_layout_md").val("1/1+1/1")):"1/3+2/3"==_?(t(".bt_bb_dialog_enter_layout_xs").val("1/1+1/1"),t(".bt_bb_dialog_enter_layout_sm").val("1/1+1/1"),t(".bt_bb_dialog_enter_layout_md").val("1/1+1/1")):"3/4+1/4"==_?(t(".bt_bb_dialog_enter_layout_xs").val("1/1+1/1"),t(".bt_bb_dialog_enter_layout_sm").val("1/1+1/1"),t(".bt_bb_dialog_enter_layout_md").val("1/1+1/1")):"1/4+3/4"==_?(t(".bt_bb_dialog_enter_layout_xs").val("1/1+1/1"),t(".bt_bb_dialog_enter_layout_sm").val("1/1+1/1"),t(".bt_bb_dialog_enter_layout_md").val("1/1+1/1")):"1/4+2/4+1/4"==_?(t(".bt_bb_dialog_enter_layout_xs").val("1/1+1/1+1/1"),t(".bt_bb_dialog_enter_layout_sm").val("1/1+1/1+1/1"),t(".bt_bb_dialog_enter_layout_md").val("1/1+1/1+1/1")):"1/5+1/5+1/5+1/5+1/5"==_&&(t(".bt_bb_dialog_enter_layout_xs").val("1/1+1/1+1/1+1/1+1/1"),t(".bt_bb_dialog_enter_layout_sm").val("1/1+1/1+1/1+1/1+1/1"),t(".bt_bb_dialog_enter_layout_md").val("1/1+1/1+1/1+1/1+1/1")))}),t(".bt_bb_dialog_enter_layout").keypress(function(t){13==t.which&&t.preventDefault()}),t(".bt_bb_dialog_add_horizontal .bt_bb_dialog_button").click(function(b){bt_bb_add_horizontal(window.bt_bb_state_current,[t(".bt_bb_dialog_enter_layout_xl").val(),t(".bt_bb_dialog_enter_layout_lg").val(),t(".bt_bb_dialog_enter_layout_md").val(),t(".bt_bb_dialog_enter_layout_sm").val(),t(".bt_bb_dialog_enter_layout_xs").val()])&&window.bt_bb_dialog.hide()})}},function(t,b,_){"use strict";window.bt_bb_edit_layout_classic=function(){let t=jQuery;for(var b=bt_bb_get_obj_by_id(window.bt_bb_state_current,window.bt_bb_from),_="",e=0;e<b.children.length;e++){var a=window.bt_bb_map[b.children[e].base].width_param;_+=attr_to_obj(b.children[e].attr)[a],e<b.children.length-1&&(_+="+")}t("#bt_bb_dialog").addClass("bt_bb_dialog_add_horizontal bt_bb_dialog_add_horizontal_classic");t("#bt_bb_dialog .bt_bb_dialog_content").html('<div class="bt_bb_dialog_pick_layout_container"><span class="bt_bb_dialog_pick_layout bt_bb_dialog_11" title="1/1"></span><span class="bt_bb_dialog_pick_layout bt_bb_dialog_12_12" title="1/2+1/2"></span><span class="bt_bb_dialog_pick_layout bt_bb_dialog_13_13_13" title="1/3+1/3+1/3"></span><span class="bt_bb_dialog_pick_layout bt_bb_dialog_14_14_14_14" title="1/4+1/4+1/4+1/4"></span><span class="bt_bb_dialog_pick_layout bt_bb_dialog_23_13" title="2/3+1/3"></span><span class="bt_bb_dialog_pick_layout bt_bb_dialog_13_23" title="1/3+2/3"></span><span class="bt_bb_dialog_pick_layout bt_bb_dialog_34_14" title="3/4+1/4"></span><span class="bt_bb_dialog_pick_layout bt_bb_dialog_14_34" title="1/4+3/4"></span><span class="bt_bb_dialog_pick_layout bt_bb_dialog_14_24_14" title="1/4+2/4+1/4"></span></div><div class="bt_bb_dialog_enter_layout_container"><div contenteditable="true" class="bt_bb_dialog_enter_layout">1/1</div></div>'),t("#bt_bb_dialog").append('<input type="button" class="bt_bb_dialog_button bt_bb_edit button button-small" value="'+window.bt_bb_text.submit+'">'),""!=_&&t(".bt_bb_dialog_enter_layout").html(_),t(".bt_bb_dialog_pick_layout").click(function(b){t(".bt_bb_dialog_enter_layout").html(t(this).attr("title").replace(/\s/gm,"")),t(".bt_bb_dialog_enter_layout").focus()}),t(".bt_bb_dialog_enter_layout").keypress(function(b){13==b.which&&(b.preventDefault(),bt_bb_add_horizontal_classic(window.bt_bb_state_current,t(this).html()),window.bt_bb_dialog.hide())}),t(".bt_bb_dialog_add_horizontal .bt_bb_dialog_button").click(function(b){bt_bb_add_horizontal_classic(window.bt_bb_state_current,t(".bt_bb_dialog_enter_layout").html()),window.bt_bb_dialog.hide()})}},function(t,b,_){"use strict";window.bt_bb_add_horizontal=function(t,b){let _=jQuery;if(void 0!==b){for(var e=[],a=function(t,b){e.push(t);var _=!1;if(""==(t=t.replace(/\s/gm,""))&&b>0)_=!1;else if(""==t)_=!0;else{var a=t.split("+");if(a.length>12)_=!0;else{var i=0,n=[],o=[];for(let t=0;t<a.length;t++){var d=a[t].split("/");if(2!=d.length){_=!0;break}var s=parseInt(d[0]);n.push(s);var r=parseInt(d[1]);if(o.push(r),s<1||s>12||r<1||r>12){_=!0;break}}if(!_){for(let t=0;t<n.length;t++){var l=12*n[t]/o[t];if(!Number.isInteger(l)&&window.bt_bb_custom_elements||!Number.isInteger(l)&&!Number.isInteger(l/2.4)){_=!0;break}i+=l}(12!=i&&0==b||!Number.isInteger(i/12))&&(_=!0)}}}return!_},i=function(t){return(t.match(/\+/g)||[]).length},n=!1,o=0;o<b.length;o++)if(!a(b[o],o)){n=!0;break}if(_(".bt_bb_dialog_enter_layout").parent().removeClass("bt_bb_layout_error_alert"),n)return _(".bt_bb_dialog_enter_layout").eq(o).parent().addClass("bt_bb_layout_error_alert"),setTimeout(function(){alert(window.bt_bb_text.layout_error)},300),!1;var d=i(b[0]);for(let t=1;t<b.length;t++){let e=i(b[t]);if(d!=e&&e>0)return _(".bt_bb_dialog_enter_layout").parent().removeClass("bt_bb_layout_error_alert"),_(".bt_bb_dialog_enter_layout").eq(t).parent().addClass("bt_bb_layout_error_alert"),setTimeout(function(){alert(window.bt_bb_text.number_columns)},300),!1}var s=window.bt_bb_from,r=e[0].split("+"),l=e[1].split("+"),c=e[2].split("+"),p=e[3].split("+"),w=e[4].split("+");for(let e=0;e<t.children.length;e++){if(s.bt_ends_with(t.children[e].key)){var h=t.children[e].children.length;if(h>0)if(r.length>=h){for(let b=0;b<h;b++){for(var m in window.bt_bb_map[window.bt_bb_base].accept);var u=window.bt_bb_map[m].width_param;(g=attr_to_obj(t.children[e].children[b].attr))[u]=r[b],g.width_lg=l[b],g.width_md=c[b],g.width_sm=p[b],g.width_xs=w[b],t.children[e].children[b].attr=JSON.stringify(g)}for(let b=h;b<r.length;b++){var v={};for(var m in window.bt_bb_map[window.bt_bb_base].accept);v.title=m,v.base=m,v.key=bt_bb_get_key(),v.children=[];u=window.bt_bb_map[m].width_param;v.attr='{"'+u+'":'+bt_bb_json_encode(r[b])+', "width_lg":'+bt_bb_json_encode(l[b])+', "width_md":'+bt_bb_json_encode(c[b])+', "width_sm":'+bt_bb_json_encode(p[b])+', "width_xs":'+bt_bb_json_encode(w[b])+"}";var g=attr_to_obj(v.attr);void 0!==window.bt_bb_map[v.base]&&void 0!==window.bt_bb_map[v.base].params&&_.each(window.bt_bb_map[v.base].params,function(t,b){b.hasOwnProperty("value")&&"string"==typeof b.value?g[b.param_name]=bt_bb_special_char_encode(b.value):b.hasOwnProperty("value")&&b.hasOwnProperty("default")&&(g[b.param_name]=b.default)}),v.attr=JSON.stringify(g),bt_bb_insert_inside(t,window.bt_bb_from,v)}}else{for(let b=0;b<r.length;b++){for(var m in window.bt_bb_map[window.bt_bb_base].accept);u=window.bt_bb_map[m].width_param;(g=attr_to_obj(t.children[e].children[b].attr))[u]=r[b],g.width_lg=l[b],g.width_md=c[b],g.width_sm=p[b],g.width_xs=w[b],t.children[e].children[b].attr=JSON.stringify(g)}bt_bb_delete_obj(t,t.children[e].children[r.length].key,h-r.length)}else for(let b=0;b<r.length;b++){v={};for(var m in window.bt_bb_map[window.bt_bb_base].accept);v.title=m,v.base=m,v.key=bt_bb_get_key(),v.children=[];u=window.bt_bb_map[m].width_param;v.attr='{"'+u+'":'+bt_bb_json_encode(r[b])+', "width_lg":'+bt_bb_json_encode(l[b])+', "width_md":'+bt_bb_json_encode(c[b])+', "width_sm":'+bt_bb_json_encode(p[b])+', "width_xs":'+bt_bb_json_encode(w[b])+"}";g=attr_to_obj(v.attr);void 0!==window.bt_bb_map[v.base]&&void 0!==window.bt_bb_map[v.base].params&&_.each(window.bt_bb_map[v.base].params,function(t,b){b.hasOwnProperty("value")&&"string"==typeof b.value?g[b.param_name]=bt_bb_special_char_encode(b.value):b.hasOwnProperty("value")&&b.hasOwnProperty("default")&&(g[b.param_name]=b.default)}),v.attr=JSON.stringify(g),bt_bb_insert_inside(t,window.bt_bb_from,v)}return window.bt_bb_action="refresh",bt_bb_dispatch(".bt_bb_item_list","bt_bb_event"),!0}if(!0===bt_bb_add_horizontal(t.children[e],b))return!0}}else window.bt_bb_dialog.show("add_horizontal")}},function(t,b,_){"use strict";window.bt_bb_add_horizontal_classic=function(t,b){jQuery;if(void 0!==b){var _=!1;if(""==(b=b.replace(/\s/gm,"").replace(/<\/?[^>]+(>|$)/gm,"")))_=!0;else{var e=b.split("+");if(e.length>12)_=!0;else{for(var a=0,i=[],n=[],o=0;o<e.length;o++){var d=e[o].split("/");if(2!=d.length){_=!0;break}var s=parseInt(d[0]);i.push(s);var r=parseInt(d[1]);if(n.push(r),s<1||s>12||r<1||r>12){_=!0;break}}if(!_){for(var l=0;l<i.length;l++){var c=12*i[l]/n[l];if(c!=Math.floor(c)&&(2.4!=c||window.bt_bb_custom_elements)){_=!0;break}a+=c}12!=a&&(_=!0)}}}if(_)return void alert(window.bt_bb_text.layout_error);var p=window.bt_bb_from;for(o=0;o<t.children.length;o++){if(p.bt_ends_with(t.children[o].key)){var w=t.children[o].children.length;if(w>0)if(e.length>=w){for(l=0;l<w;l++){for(var h in window.bt_bb_map[window.bt_bb_base].accept);var m=window.bt_bb_map[h].width_param;(v=attr_to_obj(t.children[o].children[l].attr))[m]=e[l],t.children[o].children[l].attr=JSON.stringify(v)}for(l=w;l<e.length;l++){var u={};for(var h in window.bt_bb_map[window.bt_bb_base].accept);u.title=h,u.base=h,u.key=bt_bb_get_key(),u.children=[];m=window.bt_bb_map[h].width_param;u.attr='{"'+m+'":'+bt_bb_json_encode(e[l])+"}",bt_bb_insert_inside(t,window.bt_bb_from,u)}}else{for(l=0;l<e.length;l++){for(var h in window.bt_bb_map[window.bt_bb_base].accept);var v;m=window.bt_bb_map[h].width_param;(v=attr_to_obj(t.children[o].children[l].attr))[m]=e[l],t.children[o].children[l].attr=JSON.stringify(v)}bt_bb_delete_obj(t,t.children[o].children[e.length].key,w-e.length)}else for(l=0;l<e.length;l++){u={};for(var h in window.bt_bb_map[window.bt_bb_base].accept);u.title=h,u.base=h,u.key=bt_bb_get_key(),u.children=[];m=window.bt_bb_map[h].width_param;u.attr='{"'+m+'":'+bt_bb_json_encode(e[l])+"}",bt_bb_insert_inside(t,window.bt_bb_from,u)}return window.bt_bb_action="refresh",bt_bb_dispatch(".bt_bb_item_list","bt_bb_event"),!0}if(!0===bt_bb_add_horizontal_classic(t.children[o],b))return!0}}else window.bt_bb_dialog.show("add_horizontal")}},function(t,b,_){"use strict";window.bt_bb_resize_h_helper=function(t){"_root"==t.title&&(t=t.children);for(let l=0;l<t.length;l++){if(void 0!==window.bt_bb_map[t[l].title]&&"horizontal"==window.bt_bb_map[t[l].title].container&&void 0!==t[l].children){var b=!1,_=!1,e=[],a=[],i=t[l].children.length;for(let _=0;_<i;_++){if(void 0===window.bt_bb_map[t[l].children[_].title]||void 0===window.bt_bb_map[t[l].children[_].title].width_param){b=!0;break}var n=window.bt_bb_map[t[l].children[_].title].width_param;void 0===t[l].children[_].attr&&(t[l].children[_].attr="{}"),(s=attr_to_obj(t[l].children[_].attr)).hasOwnProperty(n)||(s[n]="1/12");var o=s[n].split("/");e.push(parseInt(o[0])),a.push(parseInt(o[1]))}var d=0;for(let t=0;t<e.length;t++){if((r=12*e[t]/a[t])!=Math.floor(r)&&(2.4!=r||window.bt_bb_custom_elements)){_=!0;break}d+=r}if(!b&&(12!=d||_))for(let b=0;b<i;b++){var s;n=window.bt_bb_map[t[l].children[b].title].width_param;(s=attr_to_obj(t[l].children[b].attr))[n]="1/"+i,12==i?(s.width_lg="1/6",s.width_md="1/1",s.width_sm="1/1",s.width_xs="1/1"):6==i?(s.width_lg="1/3",s.width_md="1/1",s.width_sm="1/1",s.width_xs="1/1"):5==i?(s.width_lg="1/5",s.width_md="1/1",s.width_sm="1/1",s.width_xs="1/1"):4==i?(s.width_lg="1/4",s.width_md="1/2",s.width_sm="1/2",s.width_xs="1/1"):3==i?(s.width_lg="1/3",s.width_md="1/1",s.width_sm="1/1",s.width_xs="1/1"):2==i?(s.width_lg="1/2",s.width_md="1/2",s.width_sm="1/2",s.width_xs="1/1"):(s.width_lg="1/1",s.width_md="1/1",s.width_sm="1/1",s.width_xs="1/1"),e[b]=1,a[b]=i,t[l].children[b].attr=JSON.stringify(s)}_=!1;for(let t=0;t<e.length;t++){var r;if((r=12*e[t]/a[t])!=Math.floor(r)&&(2.4!=r||window.bt_bb_custom_elements)){_=!0;break}}t[l].has_alert=_?"bt_bb_item_alert":void 0}void 0!==t[l].children&&bt_bb_resize_h(t[l].children)}}},function(t,b,_){"use strict";window.bt_bb_resize_h_helper_classic=function(t){"_root"==t.title&&(t=t.children);for(var b=0;b<t.length;b++){if(void 0!==window.bt_bb_map[t[b].title]&&"horizontal"==window.bt_bb_map[t[b].title].container&&void 0!==t[b].children){for(var _=!1,e=!1,a=[],i=[],n=0;n<t[b].children.length;n++){if(void 0===window.bt_bb_map[t[b].children[n].title]||void 0===window.bt_bb_map[t[b].children[n].title].width_param){_=!0;break}var o=window.bt_bb_map[t[b].children[n].title].width_param;void 0===t[b].children[n].attr&&(t[b].children[n].attr="{}"),(l=attr_to_obj(t[b].children[n].attr)).hasOwnProperty(o)||(l[o]="1/12");var d=l[o].split("/");a.push(parseInt(d[0])),i.push(parseInt(d[1]))}for(var s=0,r=0;r<a.length;r++){if((c=12*a[r]/i[r])!=Math.floor(c)&&(2.4!=c||window.bt_bb_custom_elements)){e=!0;break}s+=c}if(!_&&(12!=s||e))for(n=0;n<t[b].children.length;n++){var l;o=window.bt_bb_map[t[b].children[n].title].width_param;(l=attr_to_obj(t[b].children[n].attr))[o]="1/"+t[b].children.length,a[n]=1,i[n]=t[b].children.length,t[b].children[n].attr=JSON.stringify(l)}e=!1;for(r=0;r<a.length;r++){var c;if((c=12*a[r]/i[r])!=Math.floor(c)&&(2.4!=c||window.bt_bb_custom_elements)){e=!0;break}}t[b].has_alert=e?"bt_bb_item_alert":void 0}void 0!==t[b].children&&bt_bb_resize_h(t[b].children)}}},function(t,b,e){"use strict";var a,i,n,o;window.bt_bb={},window.bt_bb.cache={},window.bt_bb.min_width=200,window.bt_bb.padding=10,window.bt_bb_state=[],window.bt_bb_state_pointer=-1,window.bt_bb_state_current=null,window.bt_bb_dirty=!1,a=jQuery,i=BTReact.createClass({render:function(){var t="",b="bt_bb_wrap",_="bt_bb_item";if(void 0!==this.props.data.has_alert&&(_+=" bt_bb_item_alert"),void 0!==this.props.data.extra_class&&(_=_+" "+this.props.data.extra_class),void 0!==window.bt_bb_map[this.props.data.base]&&(void 0!==window.bt_bb_map[this.props.data.base].container&&"horizontal"==window.bt_bb_map[this.props.data.base].container&&(t="bt_bb_horizontal"),void 0!==window.bt_bb_map[this.props.data.base].highlight&&!0===window.bt_bb_map[this.props.data.base].highlight&&(_+=" bt_bb_item_highlight"),void 0!==window.bt_bb_map[this.props.data.base].icon&&(_=_+" bt_bb_icon "+window.bt_bb_map[this.props.data.base].icon),void 0!==window.bt_bb_map[this.props.data.base].width_param&&void 0!==this.props.data.attr)){var e=(u=JSON.parse(this.props.data.attr))[window.bt_bb_map[this.props.data.base].width_param];void 0!==e&&(e=e.split("/"),b=b+" bt_bb_is_width bt_bb_width bt_bb_width"+(e=Math.round(12*e[0]/e[1])))}var n=this.props.data.key,d=this.props.data.base,s=this.props.data.children.map(function(t,b){return void 0===t.key&&(t.key="bt_bb_"+bt_bb_get_key()),BTReact.createElement(i,{key:t.key,data:t,p_key:n,p_base:d})});if(this.props.data.p_key=this.props.p_key,this.props.data.p_base=this.props.p_base,"_content"==this.props.data.base)return BTReact.createElement("div",{className:b},BTReact.createElement("div",{className:_,"data-base":this.props.data.base},BTReact.createElement("div",{className:"bt_bb_toolbar"},"]...[",BTReact.createElement(o,{has_params:"true"})),BTReact.createElement("div",{className:"bt_bb_content",dangerouslySetInnerHTML:{__html:window.switchEditors.wpautop(this.props.data.content)}})));var r=void 0!==window.bt_bb_map[this.props.data.base]&&void 0!==window.bt_bb_map[this.props.data.base].params&&window.bt_bb_map[this.props.data.base].params.length>0?"true":"false",l="";if("true"==r)for(var c=bt_bb_get_param(this.props.data.base,"params"),p=!1,w="",h=0;h<c.length;h++)if(void 0!==c[h].preview||void 0!==c[h].holder&&""!=c[h].holder){var m="";if(void 0!==this.props.data.attr)var u=JSON.parse(this.props.data.attr);if(void 0!==this.props.data.attr&&void 0!==u[c[h].param_name])m=u[c[h].param_name];else if("checkbox"==c[h].type||"checkbox_group"==c[h].type)m=void 0!==c[h].default?c[h].default:"";else if("object"==typeof c[h].value)if(void 0!==c[h].default)m=c[h].default;else{var v=Object.keys(c[h].value);m=c[h].value[v[0]]}else void 0!==c[h].value&&(m=c[h].value);if("attach_image"==c[h].type&&!p){w=this.props.data.key;var g=m,f=localStorage.getItem("bt_bb_cache_"+g);null!==f&&(void 0===window.bt_bb.cache[g]&&(window.bt_bb.cache[g]={}),window.bt_bb.cache[g].url=f),""==g?a("."+w+">.bt_bb_toolbar").css("background-image",""):void 0!==window.bt_bb.cache[g]?setTimeout(function(){a("."+w+">.bt_bb_toolbar").css("background-image","url("+window.bt_bb.cache[g].url+")")},100):a(window).load(function(){wp.media.ajax({data:{action:"get-attachment",id:g}}).done(function(t,b,_){if(void 0!==t.sizes){var e="";void 0!==t.sizes.thumbnail?e=t.sizes.thumbnail.url:void 0!==t.sizes.full&&t.sizes.full.width<=300&&t.sizes.full.height<=300&&(e=t.sizes.full.url),""!=e?(a("."+w+">.bt_bb_toolbar").css("background-image","url("+e+")"),window.bt_bb.cache[t.id]={},window.bt_bb.cache[t.id].url=e,localStorage.setItem("bt_bb_cache_"+t.id,e)):localStorage.removeItem("bt_bb_cache_"+t.id)}})}),m="",p=!0}if("iconpicker"==c[h].type)if("string"==typeof m&&""!=m){var y=m;m='<span class="bt_bb_icon_preview bt_bb_icon_preview_'+y.slice(0,-5)+'" data-icon-code="&#x'+y.substr(-4)+'"></span>'}else m="";else if("colorpicker"==c[h].type)m='<span style="color:'+m+';font-weight: bold;">'+m+"</span>";else if("textarea_object"==c[h].type)try{m=window.bt_bb_b64DecodeUnicode(m)}catch(t){}else void 0!==window["bt_bb_cf_"+c[h].type+"_param_value_preview"]&&(m=window["bt_bb_cf_"+c[h].type+"_param_value_preview"](m));"string"==typeof m&&(m=m.split("%$%")[0]),m=void 0!==c[h].preview_strong?'<span class="bt_bb_preview_strong">'+m+"</span>":'<span class="bt_bb_preview_normal">'+m+"</span>",l+=bt_bb_special_char_decode(m)}var k=void 0!==window.bt_bb_map[this.props.data.base]&&1==window.bt_bb_map[this.props.data.base].toggle?"true":"false",x=this.props.data.base;if(void 0!==window.bt_bb_map[this.props.data.base]&&void 0!==window.bt_bb_map[this.props.data.base].name&&"1"!=window.bt_bb_settings.tag_as_name&&(x=window.bt_bb_map[this.props.data.base].name),l='<span class="bt_bb_preview_name">'+x+"</span>"+l,p&&(_=_+" bt_bb_image_preview "+w),void 0!==window.bt_bb_map[this.props.data.base]&&void 0!==window.bt_bb_map[this.props.data.base].container){var O=window.bt_bb_map[this.props.data.base].container;return BTReact.createElement("div",{className:b},BTReact.createElement("div",{className:_,"data-base":this.props.data.base,"data-container":O},BTReact.createElement("div",{className:"bt_bb_toolbar"},BTReact.createElement("span",{className:"bt_bb_preview",dangerouslySetInnerHTML:{__html:l}}),BTReact.createElement(o,{container:O,mapped:"true",has_params:r,toggle:k})),BTReact.createElement("div",{className:t},s)))}var C=window.bt_bb_map[this.props.data.base],S="bt_bb_toolbar",j="true";return null!=C&&!1!==C.is_mapped||(j="false",window.bt_bb_map[this.props.data.base]={},window.bt_bb_map[this.props.data.base].is_mapped=!1,window.bt_bb_map[this.props.data.base].show_settings_on_create=!1,window.bt_bb_map[this.props.data.base].base=this.props.data.base,window.bt_bb_map[this.props.data.base].description=this.props.data.base,window.bt_bb_map[this.props.data.base].name=this.props.data.base,window.bt_bb_map[this.props.data.base].params=[],S="bt_bb_toolbar bt_bb_alert"),BTReact.createElement("div",{className:b},BTReact.createElement("div",{className:_,"data-base":this.props.data.base},BTReact.createElement("div",{className:S},""!=l?BTReact.createElement("span",{className:"bt_bb_preview",dangerouslySetInnerHTML:{__html:l}}):"",BTReact.createElement(o,{has_params:r,toggle:k,mapped:j})),BTReact.createElement("div",{className:t},s)))}}),n=BTReact.createClass({getInitialState:function(){return{data:this.props.data}},render:function(){var t=this.state.data.children.map(function(t,b){return BTReact.createElement(i,{key:t.key,data:t})});return BTReact.createElement("div",{className:"bt_bb_item_list"},t)},componentDidMount:function(){this.getDOMNode().addEventListener("bt_bb_event",this.handle),window.bt_bb_state_current=this.state.data},componentDidUpdate:function(){var t=0;a(".bt_bb_item_list > .bt_bb_wrap").each(function(){t++;var b=a(this).find(".bt_bb_preview_name").first().data("title");void 0===b&&(b=a(this).find(".bt_bb_preview_name").first().html(),a(this).find(".bt_bb_preview_name").first().data("title",b)),a(this).find(".bt_bb_preview_name").first().html('<span class="bt_bb_order" title="'+window.bt_bb_text.preview+'"><span class="bt_bb_order_inner">'+t+"</span></span>"+b)})},componentWillUnmount:function(){this.getDOMNode().removeEventListener("bt_bb_event",this.handle)},handle:function(t){if(void 0===window.bt_bb_alo[window.bt_bb_action]?window.bt_bb_alo[window.bt_bb_action]=1:window.bt_bb_alo[window.bt_bb_action]++,window.bt_bb_callback_action=null,"move_up"==window.bt_bb_action){var b=bt_bb_get_obj_copy_by_id(this.state.data,window.bt_bb_from);bt_bb_insert_before(this.state.data,window.bt_bb_to,b),window.bt_bb_ctrl||bt_bb_delete_obj(this.state.data,window.bt_bb_from)}else if("move_down"==window.bt_bb_action){b=bt_bb_get_obj_copy_by_id(this.state.data,window.bt_bb_from);bt_bb_insert_after(this.state.data,window.bt_bb_to,b),window.bt_bb_ctrl||bt_bb_delete_obj(this.state.data,window.bt_bb_from)}else if("move_inside"==window.bt_bb_action)bt_bb_insert_inside(this.state.data,window.bt_bb_to,bt_bb_get_obj_copy_by_id(this.state.data,window.bt_bb_from))&&(window.bt_bb_ctrl||bt_bb_delete_obj(this.state.data,window.bt_bb_from));else if("delete"==window.bt_bb_action)bt_bb_delete_obj(this.state.data,window.bt_bb_from);else if("add_root"==window.bt_bb_action||"add_root_from_dialog"==window.bt_bb_action){if("add_root"==window.bt_bb_action){if(void 0!==(e=bt_bb_add_root(this.state.data))&&void 0!==window.bt_bb_map[e[1]].auto_add){var _={};_.title=window.bt_bb_map[e[1]].auto_add,_.base=window.bt_bb_map[e[1]].auto_add,_.key=bt_bb_get_key(),_.children=[],bt_bb_insert_inside(this.state.data,e[0],_)}}else var e=bt_bb_add_root(this.state.data,window.bt_bb_base);void 0!==e&&!1!==bt_bb_get_param(e[1],"show_settings_on_create")&&(window.bt_bb_from=e[0],window.bt_bb_callback_action="edit")}else if("add"==window.bt_bb_action||"add_from_dialog"==window.bt_bb_action){if("add"==window.bt_bb_action)e=bt_bb_add(this.state.data);else e=bt_bb_add(this.state.data,window.bt_bb_base);if(void 0!==e&&!1!==bt_bb_get_param(e[1],"show_settings_on_create"))window.bt_bb_from=e[0],window.bt_bb_callback_action="edit";else if(void 0!==e&&!0!==bt_bb_get_param(e[1],"show_settings_on_create")){var i,n=bt_bb_get_param(e[1],"accept"),o=0;for(i in n)n.hasOwnProperty(i)&&o++;void 0!==n&&!0===n._content&&1==o&&(window.bt_bb_from=e[0],window.bt_bb_base=e[1],window.bt_bb_callback_action="add")}}else"add_horizontal"==window.bt_bb_action?window.bt_bb_custom_elements||!window.bt_bb_responsive_override_layout?bt_bb_add_horizontal_classic(this.state.data):bt_bb_add_horizontal(this.state.data):"edit"==window.bt_bb_action?bt_bb_edit(this.state.data,window.bt_bb_from):"clone"==window.bt_bb_action?bt_bb_clone(this.state.data,window.bt_bb_from):"update_state"==window.bt_bb_action?this.replaceState({data:window.bt_bb_state_current},window.bt_bb_state_callback):"copy"==window.bt_bb_action?(bt_bb_copy(this.state.data,window.bt_bb_from),a(".bt_bb_cb_items").addClass("bt_bb_cb_items_flash").delay(500).queue(function(t){a(this).removeClass("bt_bb_cb_items_flash"),t()})):"copy_plus"==window.bt_bb_action?(bt_bb_copy_plus(this.state.data,window.bt_bb_from),a(".bt_bb_cb_items").addClass("bt_bb_cb_items_flash").delay(500).queue(function(t){a(this).removeClass("bt_bb_cb_items_flash"),t()})):"paste"==window.bt_bb_action?bt_bb_paste(this.state.data,window.bt_bb_from):"paste_before"==window.bt_bb_action&&bt_bb_paste(this.state.data,window.bt_bb_from,!0);null!=window.bt_bb_action&&"edit"!=window.bt_bb_action&&"copy"!=window.bt_bb_action&&"copy_plus"!=window.bt_bb_action&&(bt_bb_resize_h(this.state.data),"update_state"!=window.bt_bb_action&&(bt_bb_push_state(this.state.data),this.replaceState({data:this.state.data},window.bt_bb_state_callback)),this.state.data.children.length>=0&&"update_wp_editor"==window.bt_bb_action&&bt_bb_parse_data(this.state.data),"refresh_on_ready"!=window.bt_bb_action&&"update_wp_editor"!=window.bt_bb_action&&(window.bt_bb_dirty=!0),bt_bb_item_mousedown(),bt_bb_toolbar())}}),o=BTReact.createClass({render:function(){var t=window.bt_bb_text.add;return"horizontal"==this.props.container&&(t=window.bt_bb_text.edit_layout),BTReact.createElement("div",{className:"bt_bb_toolbar_tools"},"true"==this.props.toggle?BTReact.createElement("i",{className:"bt_bb_toggle",title:window.bt_bb_text.toggle}):"","vertical"==this.props.container?BTReact.createElement("i",{className:"bt_bb_add",title:t}):"","horizontal"==this.props.container?BTReact.createElement("i",{className:"bt_bb_add bt_bb_edit_layout",title:t}):"","true"==this.props.has_params?BTReact.createElement("i",{className:"bt_bb_edit",title:window.bt_bb_text.edit}):"",BTReact.createElement("i",{className:"bt_bb_clone",title:window.bt_bb_text.clone}),"true"==this.props.mapped?BTReact.createElement("i",{className:"bt_bb_copy",title:window.bt_bb_text.copy}):"","true"==this.props.mapped?BTReact.createElement("i",{className:"bt_bb_copy_plus",title:window.bt_bb_text.copy_plus}):"","true"==this.props.mapped?BTReact.createElement("i",{className:"bt_bb_paste",title:window.bt_bb_text.paste}):"",BTReact.createElement("i",{className:"bt_bb_delete",title:window.bt_bb_text.delete}))}}),window.bt_bb_parse_data=function(t){window.bt_bb_parse_data_str="",t.children.length>0&&(bt_bb_parse_data_helper(t),window.switchEditors.go("content","tmce"),tinyMCE.get("content").setContent(window.switchEditors.wpautop(window.bt_bb_parse_data_str)))},window.bt_bb_parse_data_helper=function(t){"_root"==t.title&&(t=t.children);for(var b=0;b<t.length;b++){var _=!1;if("_content"==t[b].title&&(_=!0),_)window.bt_bb_parse_data_str+=t[b].content;else{if(window.bt_bb_parse_data_str+="["+t[b].base,void 0!==t[b].attr)for(var e=attr_to_arr(t[b].attr),a=0;a<e.length;a++)window.bt_bb_parse_data_str+=" "+e[a][0]+'="'+e[a][1]+'"';window.bt_bb_parse_data_str+="]"}void 0!==t[b].children&&bt_bb_parse_data_helper(t[b].children),_||(window.bt_bb_parse_data_str+="[/"+t[b].base+"]")}},window.attr_to_arr=function(t){var b=JSON.parse(t),_=[];for(var e in b)_.push([e,b[e]]);return _},window.attr_to_obj=function(t){return JSON.parse(t)},window.bt_bb_resize_h=function(t){window.bt_bb_custom_elements||!window.bt_bb_responsive_override_layout?window.bt_bb_resize_h_helper_classic(t):window.bt_bb_resize_h_helper(t)},window.bt_bb_get_obj_copy_by_id=function(t,b){var _=bt_bb_get_obj_by_id(t,b),e=JSON.parse(JSON.stringify(_));return null!=e&&(e=bt_bb_set_new_keys(e)),e},window.bt_bb_set_new_keys=function(t){t.key=bt_bb_get_key();for(var b=0;b<t.children.length;b++)bt_bb_set_new_keys(t.children[b]);return t},window.bt_bb_delete_obj=function(t,b,_){if("_content"!=t.title)for(var e=0;e<t.children.length;e++){if(b.bt_ends_with(t.children[e].key)){void 0!==_?t.children.splice(e,_):t.children.splice(e,1);break}bt_bb_delete_obj(t.children[e],b,_)}},window.bt_bb_insert_before=function(t,b,_){if("_content"!=t.title)for(var e=0;e<t.children.length;e++){if(b.bt_ends_with(t.children[e].key)){t.children.splice(e,0,_);break}bt_bb_insert_before(t.children[e],b,_)}},window.bt_bb_insert_after=function(t,b,_){if("_content"!=t.title)for(var e=0;e<t.children.length;e++){if(b.bt_ends_with(t.children[e].key)){t.children.splice(e+1,0,_);break}bt_bb_insert_after(t.children[e],b,_)}},window.bt_bb_insert_inside=function(t,b,_){if("_content"!=t.title)for(var e=0;e<t.children.length;e++){if(b.bt_ends_with(t.children[e].key)&&void 0!==t.children[e].children){if(t.children[e].children.push(_),"paste"!=window.bt_bb_action&&"paste_before"!=window.bt_bb_action&&"move_inside"!=window.bt_bb_action&&void 0!==window.bt_bb_map[_.base]&&void 0!==window.bt_bb_map[_.base].auto_add){var i={};i.title=window.bt_bb_map[_.base].auto_add,i.base=window.bt_bb_map[_.base].auto_add,i.key=bt_bb_get_key(),i.children=[];var n={};void 0!==window.bt_bb_map[i.base]&&void 0!==window.bt_bb_map[i.base].params&&a.each(window.bt_bb_map[i.base].params,function(t,b){b.hasOwnProperty("value")&&"string"==typeof b.value?n[b.param_name]=bt_bb_special_char_encode(b):b.hasOwnProperty("value")&&b.hasOwnProperty("default")&&(n[b.param_name]=b.default)}),i.attr=JSON.stringify(n),_.children.push(i)}return!0}if(!0===bt_bb_insert_inside(t.children[e],b,_))return!0}},window.bt_bb_add_root=function(t,b){var _=[];if(void 0!==b?_.push(b):a.each(window.bt_bb_map,function(t,b){1==b.root&&_.push(b.base)}),1==_.length){var e={};e.title=_[0],e.base=_[0],e.key=bt_bb_get_key(),e.children=[];var i={};return void 0!==window.bt_bb_map[e.base]&&void 0!==window.bt_bb_map[e.base].params&&a.each(window.bt_bb_map[e.base].params,function(t,b){b.hasOwnProperty("value")&&"string"==typeof b.value?i[b.param_name]=bt_bb_special_char_encode(b.value):b.hasOwnProperty("value")&&b.hasOwnProperty("default")&&(i[b.param_name]=b.default)}),e.attr=JSON.stringify(i),t.children.push(e),[e.key,e.base]}_.length>1&&window.bt_bb_dialog.show("add_root")},window.bt_bb_add=function(t,b){var _=[];if(void 0!==b?_.push(b):(a.each(window.bt_bb_map,function(t,b){var e;void 0!==window.bt_bb_map[window.bt_bb_base].accept&&(e=window.bt_bb_map[window.bt_bb_base].accept[b.base]),(!0===e||!0===window.bt_bb_map[window.bt_bb_base].accept_all&&!1!==e||void 0!==window.bt_bb_map[b.base].as_child&&-1!=window.bt_bb_map[b.base].as_child.only.indexOf(window.bt_bb_base))&&(void 0===window.bt_bb_map[b.base].as_child||void 0!==window.bt_bb_map[b.base].as_child&&-1!=window.bt_bb_map[b.base].as_child.only.indexOf(window.bt_bb_base))&&_.push(b.base)}),void 0!==window.bt_bb_map[window.bt_bb_base].accept&&!0===window.bt_bb_map[window.bt_bb_base].accept._content&&(_=[]).push("_content")),1==_.length){var e={};e.title=_[0],e.base=_[0],"_content"==e.base&&(e.content=""),e.key=bt_bb_get_key(),e.children=[];var i={};return void 0!==window.bt_bb_map[e.base]&&void 0!==window.bt_bb_map[e.base].params&&a.each(window.bt_bb_map[e.base].params,function(t,b){b.hasOwnProperty("value")&&"string"==typeof b.value?"textarea_object"==b.type?i[b.param_name]=b.value:i[b.param_name]=bt_bb_special_char_encode(b.value):b.hasOwnProperty("value")&&b.hasOwnProperty("default")&&(i[b.param_name]=b.default)}),e.attr=JSON.stringify(i),bt_bb_insert_inside(t,window.bt_bb_from,e),[e.key,e.base]}_.length>1&&window.bt_bb_dialog.show("add")},window.bt_bb_edit=function(t,b){for(var _=0;_<t.children.length;_++){if(b.bt_ends_with(t.children[_].key)){"_content"==t.children[_].title?(window.bt_bb_content=t.children[_].content,window.bt_bb_dialog.show("edit_content")):window.bt_bb_dialog.show("edit");break}bt_bb_edit(t.children[_],b)}},window.bt_bb_clone=function(t,b){a(".bt_bb_toolbar_tools").css("transition","all 0s");for(var _=0;_<t.children.length;_++){if(b.bt_ends_with(t.children[_].key)){if("_root"==t.title||void 0===window.bt_bb_map[t.base]||"horizontal"!=window.bt_bb_map[t.base].container||"horizontal"==window.bt_bb_map[t.base].container&&t.children.length<12){var e=bt_bb_get_obj_copy_by_id(t,b);t.children.splice(_+1,0,e)}break}bt_bb_clone(t.children[_],b)}},window.bt_bb_init_number_items=function(){window.bt_bb_cb_items=localStorage.getItem("bt_bb_cb_items"),null===window.bt_bb_cb_items&&(window.bt_bb_cb_items=0),a(".bt_bb_cb_items").html(window.bt_bb_cb_items)},window.bt_bb_set_number_items=function(t){localStorage.setItem("bt_bb_cb_items",t),a(".bt_bb_cb_items").html(t),window.bt_bb_cb_items=t},window.bt_bb_allowed=function(t,b){if(void 0===b)return!1;var _=window.bt_bb_map[b],e=!1;return(void 0!==_.accept&&!0===_.accept[t]||void 0!==_.accept&&void 0===_.accept[t]&&!0===_.accept_all||void 0===_.accept&&!0===_.accept_all)&&(e=!0),e},window.bt_bb_cb_import=function(t){for(var b=decodeURIComponent(window.bt_bb_b64DecodeUnicode(t)),_=JSON.parse(b),e=1;e<=_.length;e++)localStorage.setItem("bt_bb_cb_"+e,decodeURIComponent(window.bt_bb_b64DecodeUnicode(_[e-1].bt_bb_cb))),bt_bb_set_number_items(_.length)},window.bt_bb_copy=function(t,b){if(window.bt_bb_cb_items>1)for(var _=2;_<=window.bt_bb_cb_items;_++)localStorage.removeItem("bt_bb_cb_"+_);t=bt_bb_get_obj_by_id(t,b),localStorage.setItem("bt_bb_cb_1",JSON.stringify(t)),bt_bb_set_number_items(1)},window.bt_bb_copy_plus=function(t,b){var _=bt_bb_get_obj_by_id(t,b);if(0==window.bt_bb_cb_items)localStorage.setItem("bt_bb_cb_1",JSON.stringify(_)),bt_bb_set_number_items(1);else{var e=JSON.parse(localStorage.getItem("bt_bb_cb_1")),a=!1;void 0!==_.p_base?a=bt_bb_allowed(e.base,_.p_base):void 0!==window.bt_bb_map[_.base].root&&void 0!==window.bt_bb_map[e.base].root&&(a=!0),a?(window.bt_bb_cb_items++,localStorage.setItem("bt_bb_cb_"+window.bt_bb_cb_items,JSON.stringify(_)),bt_bb_set_number_items(window.bt_bb_cb_items)):alert(window.bt_bb_text.not_allowed)}},window.bt_bb_paste=function(t,b,_){if(window.bt_bb_cb_items>0){var e=bt_bb_get_obj_by_id(t,b),a=JSON.parse(localStorage.getItem("bt_bb_cb_1"));if(void 0!==window.bt_bb_map[e.base].root&&void 0!==window.bt_bb_map[a.base].root)for(var i=window.bt_bb_cb_items;i>=1;i--)a=JSON.parse(localStorage.getItem("bt_bb_cb_"+i)),a=bt_bb_set_new_keys(a),_?bt_bb_insert_before(t,b,a):bt_bb_insert_after(t,b,a);else if(bt_bb_allowed(a.base,e.p_base))if(_)for(i=1;i<=window.bt_bb_cb_items;i++)a=JSON.parse(localStorage.getItem("bt_bb_cb_"+i)),a=bt_bb_set_new_keys(a),bt_bb_insert_before(t,b,a);else for(i=window.bt_bb_cb_items;i>=1;i--)a=JSON.parse(localStorage.getItem("bt_bb_cb_"+i)),a=bt_bb_set_new_keys(a),bt_bb_insert_after(t,b,a);else if(bt_bb_allowed(a.base,e.base))for(i=1;i<=window.bt_bb_cb_items;i++)a=JSON.parse(localStorage.getItem("bt_bb_cb_"+i)),a=bt_bb_set_new_keys(a),bt_bb_insert_inside(t,b,a);else alert(window.bt_bb_text.not_allowed)}},window.bt_bb_paste_main_toolbar=function(){var t=JSON.parse(localStorage.getItem("bt_bb_cb_1"));if(void 0!==window.bt_bb_map[t.base].root){for(var b=1;b<=window.bt_bb_cb_items;b++)t=JSON.parse(localStorage.getItem("bt_bb_cb_"+b)),t=bt_bb_set_new_keys(t),window.bt_bb_state_current.children.push(t);bt_bb_event("refresh")}else alert(window.bt_bb_text.not_allowed)},window.bt_bb_dialog={},window.bt_bb_dialog.show=function(t){a("#bt_bb_front_end_preview").hide(),window.bt_bb_dialog.is_showing=!0;var b="";if("add_root"==t){var e=window.bt_bb_text.add_element,i=[];a.each(window.bt_bb_map,function(t,b){1==b.root&&i.push({base:b.base,name:b.name,description:b.description,icon:b.icon})}),i.sort(function(t,b){return t.name.toLowerCase().localeCompare(b.name.toLowerCase())}),a.each(i,function(t,_){b+='<div class="bt_bb_dialog_item bt_bb_dialog_add_element'+_.icon!==void 0?" "+_.icon:'" data-base="'+_.base+'"><b>'+_.name+"</b><i>"+_.description+"</i></div>"}),a("#bt_bb_dialog .bt_bb_dialog_content").html(b),a(".bt_bb_dialog_add_element").click(function(t){window.bt_bb_base=a(this).data("base"),window.bt_bb_dialog.hide(),bt_bb_event("add_root_from_dialog")})}else if("add"==t){e=window.bt_bb_text.add_element,i=[],a.each(window.bt_bb_map,function(t,b){var _;void 0!==window.bt_bb_map[window.bt_bb_base].accept&&(_=window.bt_bb_map[window.bt_bb_base].accept[b.base]),(!0===_||!0===window.bt_bb_map[window.bt_bb_base].accept_all&&!1!==_||void 0!==window.bt_bb_map[b.base].as_child&&-1!=window.bt_bb_map[b.base].as_child.only.indexOf(window.bt_bb_base))&&(void 0===window.bt_bb_map[b.base].as_child||void 0!==window.bt_bb_map[b.base].as_child&&-1!=window.bt_bb_map[b.base].as_child.only.indexOf(window.bt_bb_base))&&!1!==window.bt_bb_map[b.base].is_mapped&&i.push({base:b.base,name:b.name,description:b.description,icon:b.icon})}),i.sort(function(t,b){return t.name.toLowerCase().localeCompare(b.name.toLowerCase())});var n="";n+='<div class="bt_bb_dialog_item bt_bb_add_filter_container">',n+='<input type="text" class="bt_bb_filter" placeholder="'+window.bt_bb_text.filter+'">',n+="</div>",a("#bt_bb_dialog .bt_bb_dialog_header_tools").append(n);var o,d,s=document.createDocumentFragment();a.each(i,function(t,b){v=bt_bb_create_dom_element("div",[["class","bt_bb_dialog_item bt_bb_dialog_add_element"+(void 0!==b.icon?" bt_bb_icon "+b.icon:"")],["data-base",b.base]]),o=bt_bb_create_dom_element("b",[]),d=document.createTextNode(b.name),o.appendChild(d),v.appendChild(o),m=bt_bb_create_dom_element("i",[]),d=document.createTextNode(b.description),m.appendChild(d),v.appendChild(m),s.appendChild(v)}),a("#bt_bb_dialog .bt_bb_dialog_content")[0].appendChild(s),a(".bt_bb_dialog_add_element").click(function(t){window.bt_bb_base=a(this).data("base"),window.bt_bb_dialog.hide(),bt_bb_event("add_from_dialog")}),a(".bt_bb_filter").keyup(function(t){var b=a(this).val();a(".bt_bb_dialog_item").not(".bt_bb_add_filter_container").each(function(){var t=a(this).html().replace(/(<([^>]+)>)/gi,"");new RegExp(b,"i").test(t)?a(this).show():a(this).hide()})})}else if("add_horizontal"==t)e=window.bt_bb_text.edit_layout,window.bt_bb_custom_elements||!window.bt_bb_responsive_override_layout?window.bt_bb_edit_layout_classic():window.bt_bb_edit_layout();else if("edit_content"==t)e=window.bt_bb_text.edit_content,a("#bt_bb_dialog").addClass("bt_bb_dialog_tinymce_container"),a(".bt_bb_dialog_tinymce").show(),a(".bt_bb_dialog_button").unbind("click"),a(".bt_bb_dialog_button").click(function(){window.switchEditors.go("bt_bb_tinymce","tmce");var t=bt_bb_get_obj_by_id(window.bt_bb_state_current,window.bt_bb_from);t.content=tinyMCE.get("bt_bb_tinymce").getContent(),t.content.startsWith("<p>[")&&t.content.endsWith("]</p>")&&(t.content=t.content.substring(3),t.content=t.content.substring(0,t.content.length-4)),window.bt_bb_action="refresh",bt_bb_dispatch(".bt_bb_item_list","bt_bb_event"),window.bt_bb_dialog.hide()}),a("#bt_bb_dialog").css("visibility","visible"),a("#bt_bb_dialog .mce-i-resize").show();else if("edit"==t){e=window.bt_bb_text.edit;var r=bt_bb_get_obj_by_id(window.bt_bb_state_current,window.bt_bb_from),l={};if(void 0!==r.attr&&(l=attr_to_obj(r.attr)),void 0!==window.bt_bb_map[r.base]){e=e+" "+window.bt_bb_map[r.base].name,a("#bt_bb_dialog").removeClass(),a("#bt_bb_dialog").addClass("bt_bb_dialog "+r.base);var c=window.bt_bb_map[r.base].params;if(void 0!==c){s=document.createDocumentFragment();var p=new Array,w="",h="";window.bt_bb.param_groups=[];for(var m=0;m<c.length;m++){b="";var u="";if(void 0!==l[c[m].param_name]?u=l[c[m].param_name]:l[c[m].param_name]="",w=void 0!==c[m].group?c[m].group:window.bt_bb_text.general,h=" bt_bb_group_"+window.bt_bb_b64EncodeUnicode(w).replace(/[=+\/]/g,""),-1==window.bt_bb.param_groups.indexOf(w)&&window.bt_bb.param_groups.push(w),"attach_images"==c[m].type||"attach_image"==c[m].type){var v=bt_bb_create_dom_element("div",[["class","bt_bb_dialog_item"+h],["data-param_name",c[m].param_name],["data-type",c[m].type]]);b+="<b>"+c[m].heading+"</b>",b+='<div class="bt_bb_dialog_image_container">';var g=u.split(",");if(""!=g[0])for(var f=0;f<g.length;f++)b+='<div class="bt_bb_sortable_item" data-id="'+g[f]+'"><i class="fa fa-times"></i></div>',setTimeout(window.bt_bb_sortable_background,100,g[f]);b+="</div>",b+='<div class="bt_bb_dialog_inline_buttons bt_bb_left">',b+='<input type="button" class="bt_bb_dialog_select_images_button button button-small" value="'+window.bt_bb_text.select+'">',b+="</div>",v.innerHTML=b}else if("textfield"==c[m].type){v=bt_bb_create_dom_element("div",[["class","bt_bb_dialog_item"+h],["data-param_name",c[m].param_name],["data-type",c[m].type]]);var y="";""==u?void 0!==c[m].value&&(y=c[m].value,y=bt_bb_special_char_decode(y)):y=bt_bb_special_char_decode(u),v.innerHTML="<b>"+c[m].heading+'</b><input type="text" value="'+y+'">'}else if("datetime-local"==c[m].type)v=bt_bb_create_dom_element("div",[["class","bt_bb_dialog_item"+h],["data-param_name",c[m].param_name],["data-type",c[m].type]]),y="",""==u?void 0!==c[m].value&&(y=c[m].value,y=bt_bb_special_char_decode(y)):y=bt_bb_special_char_decode(u),v.innerHTML="<b>"+c[m].heading+'</b><input type="datetime-local" value="'+y+'">';else if("textarea"==c[m].type)(v=bt_bb_create_dom_element("div",[["class","bt_bb_dialog_item"+h],["data-param_name",c[m].param_name],["data-type",c[m].type]])).innerHTML="<b>"+c[m].heading+'</b><textarea rows="5">'+bt_bb_special_char_decode(u)+"</textarea>";else if("textarea_object"==c[m].type){v=bt_bb_create_dom_element("div",[["class","bt_bb_dialog_item"+h],["data-param_name",c[m].param_name],["data-type",c[m].type]]);try{v.innerHTML="<b>"+c[m].heading+'</b><textarea rows="5">'+window.bt_bb_b64DecodeUnicode(u)+"</textarea>"}catch(t){v.innerHTML="<b>"+c[m].heading+'</b><textarea rows="5">'+u+"</textarea>"}}else if("dropdown"==c[m].type||"dropdown_color"==c[m].type){v=bt_bb_create_dom_element("div",[["class","bt_bb_dialog_item"+h],["data-param_name",c[m].param_name],["data-type",c[m].type]]),c[m].responsive_override&&a(v).addClass("bt_bb_dialog_item_responsive_override"),b+="<b>"+c[m].heading+"</b>";var k=function(t,b){var _="<select>";b&&(_+='<option value="">---</option>');for(var e=c[m].value,a=Object.keys(e),i=!1,n=0;n<a.length;n++)if(t==e[a[n]]){i=!0;break}for(n=0;n<a.length;n++)i&&t==e[a[n]]||!i&&e[a[n]]==c[m].default&&!b?_+='<option value="'+e[a[n]]+'" selected>'+a[n]+"</option>":_+='<option value="'+e[a[n]]+'">'+a[n]+"</option>";return _+="</select>"},x=u.split("%$%");5!=x.length&&(x=[x[0],"","","",""]),b+=k(x[0]),b+='<div class="bt_bb_responsive_override_container">',c[m].responsive_override&&(b+='<div class="bt_bb_responsive_override"><span class="bt_bb_ro bt_bb_ro_lg"></span>',b+=k(x[1],!0),b+="</div>",b+='<div class="bt_bb_responsive_override"><span class="bt_bb_ro bt_bb_ro_md"></span>',b+=k(x[2],!0),b+="</div>",b+='<div class="bt_bb_responsive_override"><span class="bt_bb_ro bt_bb_ro_sm"></span>',b+=k(x[3],!0),b+="</div>",b+='<div class="bt_bb_responsive_override"><span class="bt_bb_ro bt_bb_ro_xs"></span>',b+=k(x[4],!0),b+="</div>"),b+="</div>",v.innerHTML=b}else if("iconpicker"==c[m].type)v=bt_bb_create_dom_element("div",[["class","bt_bb_dialog_item"+h],["data-param_name",c[m].param_name],["data-type",c[m].type]]),b+="<b>"+c[m].heading+"</b>",b+=window.bt_bb_iconpicker(c[m].value,u),v.innerHTML=b;else if("colorpicker"==c[m].type)v=bt_bb_create_dom_element("div",[["class","bt_bb_dialog_item bt_bb_colorpicker"+h],["data-param_name",c[m].param_name],["data-type",c[m].type]]),b+="<b>"+c[m].heading+"</b>",b+='<input type="text" class="bt_bb_color_picker" value="'+bt_bb_special_char_decode(u)+'" data-alpha-enabled="true">',v.innerHTML=b;else if("link"==c[m].type)v=bt_bb_create_dom_element("div",[["class","bt_bb_dialog_item"+h],["data-param_name",c[m].param_name],["data-type",c[m].type]]),y="",""==u?void 0!==c[m].value&&(y=c[m].value,y=bt_bb_special_char_decode(y)):y=bt_bb_special_char_decode(u),v.innerHTML="<b>"+c[m].heading+'</b><input type="text" value="'+y+'">',v.innerHTML+='<input type="search" placeholder="'+window.bt_bb_text.search_content+'" class="bt_bb_search_link"><span class="spinner"></span>',v.innerHTML+='<div class="bt_bb_search_link_results" data-empty-text="'+window.bt_bb_text.no_results+'"></div>';else if("checkbox"==c[m].type){v=bt_bb_create_dom_element("div",[["class","bt_bb_dialog_item"+h],["data-param_name",c[m].param_name],["data-type",c[m].type]]),b+="<b>"+c[m].heading+"</b>";var O="";u==(C=c[m].value)[(S=Object.keys(C))[0]]&&(O=" checked"),b+='<label for="bt_'+r.base+"_"+c[m].param_name+'"><input id="bt_'+r.base+"_"+c[m].param_name+'" type="checkbox" value="'+C[S[0]]+'"'+O+"><span>"+S[0]+"</span></label>",v.innerHTML=b}else if("checkbox_group"==c[m].type){v=bt_bb_create_dom_element("div",[["class","bt_bb_dialog_item"+h],["data-param_name",c[m].param_name],["data-type",c[m].type]]),b+="<b>"+c[m].heading+"</b>";for(var C=c[m].value,S=Object.keys(C),j=u.split(" "),N=0;N<S.length;N++)O="",-1!=a.inArray(C[S[N]],j)&&(O=" checked"),b+='<label for="'+r.base+"_"+c[m].param_name+N+'"><input id="'+r.base+"_"+c[m].param_name+N+'" type="checkbox" value="'+C[S[N]]+'"'+O+"><span>"+S[N]+"</span></label>";v.innerHTML=b}else if("hidden"==c[m].type){var E=new Object;E.name=c[m].param_name,E.value=c[m].value,p.push(E)}else if(void 0!==window["bt_bb_cf_"+c[m].type+"_content"]){v=bt_bb_create_dom_element("div",[["class","bt_bb_dialog_item"+h],["data-param_name",c[m].param_name],["data-type",c[m].type]]);var z={};z.param_heading=c[m].heading,z.param_value=c[m].value,z.param_name=c[m].param_name,z.val=u,z.base=r.base,v.innerHTML=window["bt_bb_cf_"+c[m].type+"_content"](z)}if("hidden"!=c[m].type){if(void 0!==c[m].description){var T=bt_bb_create_dom_element("i",[]);T.innerHTML=c[m].description,v.appendChild(T)}s.appendChild(v)}}a("#bt_bb_dialog").data("hidden",JSON.stringify(p)),a("#bt_bb_dialog .bt_bb_dialog_content")[0].appendChild(s),a(".bt_bb_color_picker").wpColorPicker();var R=function(t,b,_){b.find(".spinner").show(),b.find(".spinner").css("visibility","visible");var e={action:"bt_bb_search_links",search:t,page:_};a.ajax({type:"POST",url:window.BTAJAXURL,data:e,async:!0,success:function(t){var e=JSON.parse(t);e.length<20&&b.data("thats_all",!0);var a=b.find(".bt_bb_search_link_results");1==_&&(a.empty(),a[0].scrollTo(0,0)),e.forEach(function(t,b){var _=t.permalink;1==window.bt_bb_settings.slug_url&&(_=t.slug),a.append('<div data-link="'+_+'" title="'+_+'">'+t.title+"<span>"+t.info+"</span></div>")}),b.find(".spinner").hide(),b.data("page",_)}})};a('div[data-type="link"]').each(function(){var t=a(this);R("",t,1),a(this).find(".bt_bb_search_link").on("input",function(b){var _=(new Date).getTime();void 0!==t.data("last_input_time")&&_-t.data("last_input_time")<500||(t.data("thats_all",!1),setTimeout(function(){R(t.find(".bt_bb_search_link").val(),t,1)},500),t.data("last_input_time",(new Date).getTime()))}),a(this).find(".bt_bb_search_link").on("focus",function(b){t.find(".bt_bb_search_link_results").show()}),a(this).find(".bt_bb_search_link").on("blur",function(b){setTimeout(function(){t.find(".bt_bb_search_link_results").hide()},200)}),a(this).on("click",".bt_bb_search_link_results div",function(){t.find('input[type="text"]').val(a(this).data("link"))}),a(this).find(".bt_bb_search_link_results").on("scroll",function(b){var _=(new Date).getTime();void 0!==t.data("last_scroll_time")&&_-t.data("last_scroll_time")<500||this.scrollTop>.8*(this.scrollHeight-this.clientHeight)&&!t.data("thats_all")&&(R(a(this).val(),t,t.data("page")+1),t.data("last_scroll_time",(new Date).getTime()))})}),a(".bt_bb_iconpicker_select").on("click",function(t){a(this).next().toggle(),a(this).next().next().toggle()}),a(".bt_bb_iconpicker_icons .bt_bb_icon_preview").on("click",function(t){var b=a(this).closest(".bt_bb_iconpicker").find(".bt_bb_iconpicker_select .bt_bb_icon_preview");b.attr("data-icon",a(this).data("icon")),b.attr("data-icon-code",a(this).data("icon-code")),b.removeClass(),b.addClass(a(this).attr("class")),a(this).closest(".bt_bb_iconpicker").find(".bt_bb_iconpicker_select .bt_bb_iconpicker_select_text").html(a(this).attr("title")),a(this).closest(".bt_bb_iconpicker").find(".bt_bb_iconpicker_clear").show(),a(this).parent().hide(),a(this).parent().prev().find("input").val("").trigger("keyup"),a(this).parent().prev().hide()}),a(".bt_bb_iconpicker .bt_bb_iconpicker_clear").on("click",function(t){t.stopPropagation();var b=a(this).closest(".bt_bb_iconpicker").find(".bt_bb_iconpicker_select .bt_bb_icon_preview");b.attr("data-icon",""),b.attr("data-icon-code",""),b.parent().find(".bt_bb_iconpicker_select_text").html(""),a(this).closest(".bt_bb_iconpicker").find("input").val(""),a(this).parent().next().find("input").val("").trigger("keyup"),a(this).parent().next().hide(),a(this).parent().next().next().hide(),a(this).hide()}),a(".bt_bb_iconpicker .bt_bb_filter").keyup(function(t){var b=a(this).val();a(this).closest(".bt_bb_iconpicker").find(".bt_bb_iconpicker_icons .bt_bb_icon_preview").each(function(){var t=a(this).attr("title");new RegExp(b,"i").test(t)?a(this).show():a(this).hide()})}),a('#bt_bb_dialog .bt_bb_dialog_item[data-type="attach_images"] .bt_bb_dialog_image_container').sortable({cursor:"move",update:function(t,b){var _=a(this).closest(".bt_bb_dialog_item").data("param_name"),e="";a(this).find(".bt_bb_sortable_item").each(function(){e+=a(this).data("id")+","}),e=e.slice(0,-1),l[_]=e}}),a("#bt_bb_dialog .bt_bb_dialog_image_container").on("click",".fa-times",function(t){var b=a(this).closest(".bt_bb_dialog_item").data("param_name"),_=a(this).closest(".bt_bb_dialog_image_container");a(this).parent().remove();var e="";_.find(".bt_bb_sortable_item").each(function(){e+=a(this).data("id")+","}),e=e.slice(0,-1),l[b]=e}),a("#bt_bb_dialog .bt_bb_dialog_image_container").disableSelection(),a(".bt_bb_dialog_item").on("click",".bt_bb_dialog_select_images_button",function(t){var b=bt_bb_get_key(),e=a(this).closest(".bt_bb_dialog_item").find(".bt_bb_dialog_image_container"),i=a(this).closest(".bt_bb_dialog_item").data("param_name"),n="add";"attach_image"==a(this).closest(".bt_bb_dialog_item").data("type")&&(n=!1);var o=wp.media.controller.Library.extend({defaults:_.defaults({id:b,title:window.bt_bb_text.select_images,allowLocalEdits:!1,displaySettings:!1,displayUserSettings:!1,multiple:n,type:"image"},wp.media.controller.Library.prototype.defaults)}),d=wp.media({button:{text:window.bt_bb_text.select},state:b,states:[new o]});d.on("close",function(){var t=d.state(b).get("selection"),_="",a="";t.each(function(t){if(void 0!==t.attributes.sizes){var b="";b=void 0!==t.attributes.sizes.thumbnail?t.attributes.sizes.thumbnail.url:t.attributes.sizes.full.url,a+=t.id+",",window.bt_bb.cache[t.id]={},window.bt_bb.cache[t.id].url=b,window.bt_bb.cache[t.id].title=t.attributes.title,_+='<div class="bt_bb_sortable_item" data-id="'+t.id+'" style="background-image:url(\''+b+'\');"><i class="fa fa-times"></i></div>',e.html(_)}}),a=a.slice(0,-1),l[i]=a}),d.on("open",function(){var t=d.state(b).get("selection");e.find(".bt_bb_sortable_item").each(function(){var b=wp.media.attachment(a(this).data("id"));t.add(b)})}),d.open()})}}window.bt_bb.param_groups.length>0&&a(".bt_bb_dialog_item").hide(),a.each(window.bt_bb.param_groups,function(t,b){var _="bt_bb_group_tab";0==t&&(_="bt_bb_group_tab bt_bb_group_tab_active",a(".bt_bb_group_"+window.bt_bb_b64EncodeUnicode(b).replace(/[=+\/]/g,"")).show()),a(".bt_bb_dialog_header_tools").append('<span class="'+_+'">'+b+"</span>")}),a("#bt_bb_dialog .bt_bb_group_tab").click(function(t){var b=a(this).html();a(".bt_bb_dialog_item").hide(),a(".bt_bb_group_"+window.bt_bb_b64EncodeUnicode(b).replace(/[=+\/]/g,"")).show(),a(".bt_bb_group_tab").removeClass("bt_bb_group_tab_active"),a(this).addClass("bt_bb_group_tab_active"),window.bt_bb_resize_dialog()}),a("#bt_bb_dialog").append('<input type="button" class="bt_bb_dialog_button bt_bb_edit button button-small" value="'+window.bt_bb_text.submit+'">'),a("#bt_bb_dialog .bt_bb_dialog_button").click(function(t){a("#bt_bb_dialog .bt_bb_dialog_item").each(function(){var t=a(this).data("param_name"),b=a(this).data("type");if("textfield"==b||"datetime-local"==b||"colorpicker"==b||"link"==b)l[t]=bt_bb_special_char_encode(a(this).find("input").val());else if("checkbox"==b)a(this).find("input").prop("checked")?l[t]=a(this).find("input").val():l[t]="";else if("checkbox_group"==b){var _=[];a(this).find("input").each(function(){a(this).prop("checked")&&_.push(a(this).val())}),l[t]=_.join(" ")}else if("textarea"==b)l[t]=bt_bb_special_char_encode(a(this).find("textarea").val());else if("textarea_object"==b)try{l[t]=window.bt_bb_b64EncodeUnicode(a(this).find("textarea").val())}catch(b){l[t]=a(this).find("textarea").val()}else if("dropdown"==b)if(a(this).hasClass("bt_bb_dialog_item_responsive_override")){var e=[];a(this).find("select :selected").each(function(){e.push(a(this).val())}),l[t]=e.join("%$%")}else l[t]=a(this).find("select :selected").val();else"iconpicker"==b?l[t]=a(this).find(".bt_bb_iconpicker_select .bt_bb_icon_preview").data("icon"):void 0!==window["bt_bb_cf_"+b+"_on_submit"]&&(l[t]=window["bt_bb_cf_"+b+"_on_submit"](a(this)))});for(var b=JSON.parse(a("#bt_bb_dialog").data("hidden")),_=0;_<b.length;_++)l[""+b[_].name]=b[_].value;r.attr=JSON.stringify(l),window.bt_bb_dialog.hide(),window.bt_bb_action="refresh",bt_bb_dispatch(".bt_bb_item_list","bt_bb_event")})}else if("manage_cb"==t)e=window.bt_bb_text.manage_cb,b+='<div class="bt_bb_dialog_item">',b+='<input type="text" class="bt_bb_impex_input">',b+="</div>",a("#bt_bb_dialog .bt_bb_dialog_content").html(b),a("#bt_bb_dialog").append('<div class="bt_bb_dialog_inline_buttons"><input type="button" class="bt_bb_dialog_button bt_bb_edit button button-small bt_bb_button_export" value="'+window.bt_bb_text.export+'"><input type="button" class="bt_bb_dialog_button bt_bb_edit button button-small bt_bb_button_import" value="'+window.bt_bb_text.import+'"></div>'),a("#bt_bb_dialog .bt_bb_button_export").click(function(t){if(window.bt_bb_cb_items>0){for(var b="[",_=1;_<=window.bt_bb_cb_items;_++)b+='{"bt_bb_cb":"'+window.bt_bb_b64EncodeUnicode(encodeURIComponent(localStorage.getItem("bt_bb_cb_"+_)))+'"},';b=b.substring(0,b.length-1),b+="]",a(".bt_bb_impex_input").val(window.bt_bb_b64EncodeUnicode(encodeURIComponent(b))),a(".bt_bb_impex_input").select()}}),a("#bt_bb_dialog .bt_bb_button_import").click(function(t){a(".bt_bb_impex_input").val()&&bt_bb_cb_import(a(".bt_bb_impex_input").val())});else if("sc_mapper"==t){e=window.bt_bb_text.sc_mapper,a("#bt_bb_dialog").addClass("bt_bb_dialog_sc_mapper_container"),n="",n+='<div class="bt_bb_dialog_item bt_bb_sc_mapper_filter_container">',n+='<input type="text" class="bt_bb_filter" placeholder="'+window.bt_bb_text.filter+'">',n+="</div>",a("#bt_bb_dialog .bt_bb_dialog_header_tools").append(n);var J=function(t){var b=t;return void 0!==window.bt_bb_map_primary[t]&&(b+=" / p"),void 0!==window.bt_bb_map_secondary[t]&&(b+=" / s"),b};for(s=document.createDocumentFragment(),v=bt_bb_create_dom_element("div",[["id","bt_bb_sc_mapper_accordion"]]),m=0;m<window.bt_bb.all_sc.length;m++){if(void 0!==window.bt_bb_map[window.bt_bb.all_sc[m]]&&!1!==window.bt_bb_map[window.bt_bb.all_sc[m]].is_mapped){(M=bt_bb_create_dom_element("h3",[["class","bt_bb_sc_mapper_item"]])).innerHTML='<i class="fa fa-chevron-down"></i><span>'+J(window.bt_bb.all_sc[m])+"</span>";var I=bt_bb_create_dom_element("div",[["data-base",window.bt_bb.all_sc[m]]])}else{var M;(M=bt_bb_create_dom_element("h3",[["class","bt_bb_sc_mapper_item bt_bb_sc_mapper_unmapped"]])).innerHTML='<i class="fa fa-chevron-down"></i><span>'+window.bt_bb.all_sc[m]+"</span>",I=bt_bb_create_dom_element("div",[["data-base",window.bt_bb.all_sc[m]]])}v.appendChild(M),v.appendChild(I)}s.appendChild(v),a("#bt_bb_dialog .bt_bb_dialog_content")[0].appendChild(s),a(".bt_bb_filter").keyup(function(t){var b=a(this).val();a("#bt_bb_sc_mapper_accordion > div").removeClass("bt_bb_map_item_active"),a("#bt_bb_sc_mapper_accordion > h3").removeClass("bt_bb_map_header_active"),a("#bt_bb_sc_mapper_accordion > h3 > i").removeClass("fa-chevron-up").addClass("fa-chevron-down"),a(".bt_bb_sc_mapper_item").each(function(){var t=a(this).html().replace(/(<([^>]+)>)/gi,"");new RegExp(b,"i").test(t)?a(this).show():a(this).hide()})}),a(".bt_bb_sc_map").keydown(function(t){if(9===t.keyCode){t.preventDefault();var b=this.selectionStart,_=this.selectionEnd,e=a(this);e.val(e.val().substring(0,b)+"\t"+e.val().substring(_)),this.selectionStart=this.selectionEnd=b+1,a(this).parent().find(".bt_bb_save_mapping_button").prop("disabled",!1)}}),a("#bt_bb_sc_mapper_accordion h3").click(function(t){var b=a(this).next();if(b.hasClass("bt_bb_map_item_active"))b[0].innerHTML="",b.removeClass("bt_bb_map_item_active"),a(this).removeClass("bt_bb_map_header_active"),a(this).find("i").removeClass("fa-chevron-up").addClass("fa-chevron-down");else{var _='<input type="button" class="button button-small bt_bb_insert_mapping_template_button" value="'+window.bt_bb_text.insert_mapping+'"><input type="button" class="button button-small bt_bb_delete_mapping_button" disabled value="'+window.bt_bb_text.delete+'"><input type="button" class="button button-small bt_bb_save_mapping_button" disabled value="'+window.bt_bb_text.save+'"><span class="spinner" style="display: none;"></span><textarea class="bt_bb_sc_map" rows="10"></textarea>';b[0].innerHTML=_,autosize(a(".bt_bb_sc_map")),b.addClass("bt_bb_map_item_active"),a(this).addClass("bt_bb_map_header_active"),a(this).find("i").removeClass("fa-chevron-down").addClass("fa-chevron-up");var e=b.data("base");void 0!==window.bt_bb_map_secondary[e]&&(b.find(".bt_bb_delete_mapping_button").prop("disabled",!1),b.find(".bt_bb_insert_existing_mapping_button").click(),b.find(".bt_bb_save_mapping_button").prop("disabled",!0))}}),a("#bt_bb_sc_mapper_accordion").on("keydown",".bt_bb_sc_map",function(){a(this).parent().find(".bt_bb_save_mapping_button").prop("disabled",!1)}),a("#bt_bb_sc_mapper_accordion").on("click",".bt_bb_insert_mapping_template_button",function(t){var b=a(this).parent().find("textarea"),_=a(this).parent().data("base");if(void 0!==window.bt_bb_map[_]&&!1!==window.bt_bb_map[_].is_mapped)var e=JSON.stringify(window.bt_bb_map[_],null,"\t");else if(void 0!==window.vc_mapper&&void 0!==window.vc_mapper[_]){var i=window.vc_mapper[_];(e={}).name=void 0!==i.name?i.name:"",e.base=void 0!==i.base?i.base:"",e.description=void 0!==i.description?i.description:"",e.show_settings_on_create=void 0===i.show_settings_on_create||i.show_settings_on_create,!0===i.is_container&&("vc_row"==i.base?(e.root=!0,e.container="horizontal",e.accept={vc_column:!0},e.toggle=!0):"vc_row_inner"==i.base?(e.container="horizontal",e.accept={vc_column_inner:!0}):"vc_column"==i.base?(e.container="vertical",e.width_param="width",e.accept_all=!0,e.accept={vc_row:!1,vc_column:!1,vc_column_inner:!1}):"vc_column_inner"==i.base?(e.container="vertical",e.width_param="width",e.accept_all=!0,e.accept={vc_row:!1,vc_column:!1,vc_row_inner:!1,vc_column_inner:!1}):e.container="vertical"),e.params=[];for(var n="",o=0,d=0;d<i.params.length;d++)"textarea_html"!=i.params[d].type&&!1!==i.params[d].admin_label?(e.params[o]={},e.params[o].type="textfield","textarea"!=(n=i.params[d].type)&&"dropdown"!=n&&"attach_image"!=n&&"attach_images"!=n&&"colorpicker"!=n&&"checkbox"!=n&&"checkbox_group"!=n&&"hidden"!=n||(e.params[o].type=n),e.params[o].heading=void 0!==i.params[d].heading?i.params[d].heading:"",void 0!==i.params[d].description&&(e.params[o].heading+=" ("+i.params[d].description+")"),e.params[o].param_name=void 0!==i.params[d].param_name?i.params[d].param_name:"",e.params[o].value=void 0!==i.params[d].value?i.params[d].value:"",void 0!==i.params[d].holder&&(e.params[o].preview=!0),o++):"textarea_html"==i.params[d].type&&(e.container="vertical",e.accept={_content:!0});e=JSON.stringify(e,null,"\t")}else(e={}).name=_,e.base=_,e.description="",e.show_settings_on_create=!0,e.params=[],e.params[0]={},e.params[0].type="textfield",e.params[0].heading="Param 1",e.params[0].param_name="param_1",e.params[0].value="",e.params[0].preview=!0,e.params[1]={},e.params[1].type="dropdown",e.params[1].heading="Param 2",e.params[1].param_name="param_2",e.params[1].value={"Option 1":"value 1","Option 2":"value 2"},e.params[1].preview=!0,e=JSON.stringify(e,null,"\t");b.val(e);var s=document.createEvent("Event");s.initEvent("autosize:update",!0,!1),b[0].dispatchEvent(s),a(this).parent().find(".bt_bb_save_mapping_button").prop("disabled",!1)}),a("#bt_bb_sc_mapper_accordion").on("click",".bt_bb_save_mapping_button",function(t){var b=a(this).parent().data("base"),_=a(this);try{var e=JSON.parse(a(this).parent().find(".bt_bb_sc_map").val())}catch(t){return alert(t),!1}var i=JSON.stringify(e);_.siblings(".spinner").show(),_.siblings(".spinner").css("visibility","visible");var n={action:"bt_bb_save_mapping",base:b,map:i};a.ajax({type:"POST",url:window.BTAJAXURL,data:n,async:!0,success:function(t){"ok"==t&&(_.prop("disabled",!0),_.siblings(".spinner").hide(),_.closest("div").prev(".bt_bb_sc_mapper_item").removeClass("bt_bb_sc_mapper_unmapped"),window.bt_bb_map[b]=JSON.parse(i),void 0===window.bt_bb_map_secondary[b]&&(window.bt_bb_map_secondary[b]=!0),_.closest("div").prev(".bt_bb_sc_mapper_item").find("span").html(J(b)),void 0!==window.bt_bb_map_secondary[b]&&_.parent("div").find(".bt_bb_delete_mapping_button").prop("disabled",!1),window.bt_bb_action="refresh",bt_bb_dispatch(".bt_bb_item_list","bt_bb_event"))}})}),a("#bt_bb_sc_mapper_accordion").on("click",".bt_bb_delete_mapping_button",function(t){var b=a(this).parent().data("base"),_=a(this);_.siblings(".spinner").show(),_.siblings(".spinner").css("visibility","visible");var e={action:"bt_bb_delete_mapping",base:b};a.ajax({type:"POST",url:window.BTAJAXURL,data:e,async:!0,success:function(t){"ok"==t&&(_.prop("disabled",!0),_.siblings(".spinner").hide(),void 0!==window.bt_bb_map_secondary[b]&&delete window.bt_bb_map_secondary[b],_.parent().find("textarea").val(""),void 0===window.bt_bb_map_primary[b]?(_.closest("div").prev(".bt_bb_sc_mapper_item").addClass("bt_bb_sc_mapper_unmapped"),delete window.bt_bb_map[b],window.bt_bb_action="refresh",bt_bb_dispatch(".bt_bb_item_list","bt_bb_event")):window.bt_bb_map[b]=window.bt_bb_map_primary[b],_.closest("div").prev(".bt_bb_sc_mapper_item").find("span").html(J(b)))}})})}else"custom_css"==t&&(e=window.bt_bb_text.custom_css,b+='<div class="bt_bb_dialog_item">',b+='<textarea id="bt_bb_custom_css_content" class="bt_bb_custom_css_content" rows="10">'+window.bt_bb_b64DecodeUnicode(window.bt_bb_custom_css)+"</textarea>",b+="</div>",a("#bt_bb_dialog .bt_bb_dialog_content").html(b),a("#bt_bb_dialog").append('<div class="bt_bb_dialog_inline_buttons"><input type="button" class="bt_bb_dialog_button button button-small bt_bb_button_save_custom_css" value="'+window.bt_bb_text.save+'"></div>'),void 0!==wp.codeEditor?window.bt_bb_ce=wp.codeEditor.initialize("bt_bb_custom_css_content"):a("#bt_bb_dialog").on("keydown",".bt_bb_custom_css_content",function(t){if(9===t.keyCode){t.preventDefault();var b=this.selectionStart,_=this.selectionEnd,e=a(this);e.val(e.val().substring(0,b)+"\t"+e.val().substring(_)),this.selectionStart=this.selectionEnd=b+1}}));a("#bt_bb_dialog .bt_bb_dialog_header span").html(e),a('.bt_bb_dialog_item input[type="text"]').keypress(function(t){13==t.which&&t.preventDefault()}),"edit_content"==t?(a(".bt_bb_dialog_tinymce").css("height","auto"),window.switchEditors.go("bt_bb_tinymce","tmce"),tinyMCE.get("bt_bb_tinymce").setContent(window.switchEditors.wpautop(window.bt_bb_content))):(a("#bt_bb_dialog").css("visibility","visible"),a("#bt_bb_dialog .mce-i-resize").show()),"add"!=t&&"sc_mapper"!=t||a(".bt_bb_filter").focus(),window.bt_bb_resize_dialog()},window.bt_bb_dialog.hide=function(t){window.bt_bb_dialog.is_showing=!1,window.bt_bb_dialog.is_mouseover=!1,a(".wp-picker-open").click(),a(".bt_bb_dialog_tinymce").hide(),a("#bt_bb_dialog").data("hidden",""),a("#bt_bb_dialog").removeClass("bt_bb_dialog_tinymce_container"),a("#bt_bb_dialog").removeClass("bt_bb_dialog_sc_mapper_container"),a("#bt_bb_dialog").removeClass("bt_bb_dialog_add_horizontal"),a("#bt_bb_dialog").removeClass("bt_bb_dialog_custom_css");for(var b=a("#bt_bb_dialog .bt_bb_dialog_content")[0];b.firstChild;)b.removeChild(b.firstChild);a("#bt_bb_dialog .bt_bb_dialog_header")[0].innerHTML='<div class="bt_bb_dialog_close"></div><span></span>',a("#bt_bb_dialog .bt_bb_dialog_header_tools")[0].innerHTML="",a("#bt_bb_dialog > input").remove(),a("#bt_bb_dialog > .bt_bb_dialog_inline_buttons").remove(),a("#bt_bb_dialog").css("visibility","hidden")},a(document).ready(function(){a("#bt_bb_dialog").on("click",".bt_bb_dialog_close",function(t){window.bt_bb_dialog.hide()})}),window.bt_bb_get_obj_by_id=function(t,b){for(var _=null,e=0;e<t.children.length;e++){if(b.bt_ends_with(t.children[e].key)){_=t.children[e];break}if(null!=(_=bt_bb_get_obj_by_id(t.children[e],b)))break}return _},window.bt_bb_get_param=function(t,b){if(void 0!==window.bt_bb_map[t])return window.bt_bb_map[t][b]},window.bt_bb_state_callback=function(){bt_bb_horizontal_responsive(),null!==window.bt_bb_callback_action&&bt_bb_event(window.bt_bb_callback_action)},window.bt_bb_horizontal_responsive=function(){a(".bt_bb_horizontal").each(function(){var t=a(this).width(),b=!1;a(this).find(".bt_bb_is_width").each(function(){var _=bt_bb_get_obj_by_id(window.bt_bb_state_current,a(this).data("reactid")),e=window.bt_bb_map[_.base].width_param,i=attr_to_obj(_.attr)[e];if(i=12*(i=i.split("/"))[0]/i[1],t*i/12<window.bt_bb.min_width)return b=!0,!1}),b?(a(this).find(".bt_bb_is_width").removeClass("bt_bb_width"),a(this).css("display","block")):(a(this).find(".bt_bb_is_width").addClass("bt_bb_width"),a(this).css("display","table"))})},a(window).resize(function(){bt_bb_horizontal_responsive()}),window.bt_bb_push_state=function(t){window.bt_bb_state_current=t,window.bt_bb_state.splice(window.bt_bb_state_pointer+1),window.bt_bb_state.push(JSON.stringify(t)),window.bt_bb_state_pointer=window.bt_bb_state.length-1},window.bt_bb_undo=function(){window.bt_bb_dialog.hide(),window.bt_bb_state_pointer--,window.bt_bb_state_pointer>-1?(window.bt_bb_state_current=JSON.parse(window.bt_bb_state[window.bt_bb_state_pointer]),window.bt_bb_action="update_state",bt_bb_dispatch(".bt_bb_item_list","bt_bb_event")):window.bt_bb_state_pointer++},window.bt_bb_redo=function(){window.bt_bb_dialog.hide(),window.bt_bb_state_pointer++,window.bt_bb_state_pointer<=window.bt_bb_state.length-1?(window.bt_bb_state_current=JSON.parse(window.bt_bb_state[window.bt_bb_state_pointer]),window.bt_bb_action="update_state",bt_bb_dispatch(".bt_bb_item_list","bt_bb_event")):window.bt_bb_state_pointer--},window.bt_bb_sortable_background=function(t){void 0===window.bt_bb.cache[t]?wp.media.attachment(t).fetch().done(function(t){var b="";b=void 0!==t.sizes.thumbnail?t.sizes.thumbnail.url:t.sizes.full.url,a('.bt_bb_sortable_item[data-id="'+t.id+'"]').css("background-image",'url("'+b+'")'),a('.bt_bb_sortable_item[data-id="'+t.id+'"]').css("background-size","cover"),window.bt_bb.cache[t.id]={},window.bt_bb.cache[t.id].url=b,window.bt_bb.cache[t.id].title=t.title}):(a('.bt_bb_sortable_item[data-id="'+t+'"]').css("background-image",'url("'+window.bt_bb.cache[t].url+'")'),a('.bt_bb_sortable_item[data-id="'+t+'"]').css("background-size","cover"))},window.bt_bb_iconpicker=function(t,b){var _,e='<div class="bt_bb_iconpicker">',a=Object.keys(t);e+='<div class="bt_bb_iconpicker_select">';for(var i=b.slice(0,-5),n=b.substr(-4),o="",d=0;d<a.length;d++){_=Object.keys(t[a[d]]);for(var s=0;s<_.length;s++)b==t[a[d]][_[s]]&&(o=_[s])}""!=n&&(n="&#x"+n),e+='<div class="bt_bb_icon_preview bt_bb_icon_preview_'+i+'" data-icon="'+b+'" data-icon-code="'+n+'"></div>',e+='<div class="bt_bb_iconpicker_select_text">'+o+"</div>",e+='<i class="fa fa-close bt_bb_iconpicker_clear" style="display:'+(""!=o?"block":"none")+'"></i>',e+='<i class="fa fa-angle-down"></i>',e+="</div>",e+='<div class="bt_bb_iconpicker_filter_container">',e+='<input type="text" class="bt_bb_filter" placeholder="'+window.bt_bb_text.filter+'">',e+="</div>",e+='<div class="bt_bb_iconpicker_icons">';for(var r=0;r<a.length;r++){e+='<div class="bt_bb_iconpicker_title">'+a[r]+"</div>",_=Object.keys(t[a[r]]);for(var l=0;l<_.length;l++)i=(b=t[a[r]][_[l]]).slice(0,-5),n=b.substr(-4),e+='<div class="bt_bb_icon_preview bt_bb_icon_preview_'+i+'" data-icon="'+b+'" data-icon-code="&#x'+n+'" title="'+_[l]+'"></div>'}return e+="</div>",e+="</div>"},String.prototype.bt_ends_with=function(t){return-1!==this.indexOf(t,this.length-t.length)},window.bt_bb_get_key=function(){var t="bt_bb_"+Math.random().toString();return t=t.replace(".","")},window.bt_bb_dispatch=function(t,b){try{var _=new Event(b)}catch(t){(_=document.createEvent("Event")).initEvent(b,!1,!1)}a(t)[0].dispatchEvent(_)},a(document).ready(function(){a("#bt_bb").length>0&&(window.bt_bb_element_list=BTReact.render(BTReact.createElement(n,{data:window.bt_bb_data}),a("#bt_bb")[0],function(){bt_bb_horizontal_responsive(),bt_bb_resize_h(window.bt_bb_data),window.bt_bb_action="refresh_on_ready",bt_bb_dispatch(".bt_bb_item_list","bt_bb_event")})),a("body").on("click",".bt_bb_iconpicker_widget_container .bt_bb_iconpicker_select",function(t){a(this).next().toggle(),a(this).next().next().toggle()}),a("body").on("click",".bt_bb_iconpicker_widget_container .bt_bb_icon_preview",function(t){var b=a(this).closest(".bt_bb_iconpicker").find(".bt_bb_iconpicker_select .bt_bb_icon_preview");b.attr("data-icon",a(this).data("icon")),b.attr("data-icon-code",a(this).data("icon-code")),b.removeClass(),b.addClass(a(this).attr("class")),a(this).closest(".bt_bb_iconpicker").find("input").val(a(this).data("icon")),a(this).closest(".bt_bb_iconpicker").find("input").trigger("change"),a(this).closest(".bt_bb_iconpicker").find(".bt_bb_iconpicker_select .bt_bb_iconpicker_select_text").html(a(this).attr("title")),a(this).closest(".bt_bb_iconpicker").find(".bt_bb_iconpicker_clear").show(),a(this).parent().hide(),a(this).parent().prev().find("input").val("").trigger("keyup"),a(this).parent().prev().hide()}),a("body").on("click",".bt_bb_iconpicker_widget_container .bt_bb_iconpicker_clear",function(t){t.stopPropagation();var b=a(this).closest(".bt_bb_iconpicker").find(".bt_bb_iconpicker_select .bt_bb_icon_preview");b.attr("data-icon",""),b.attr("data-icon-code",""),b.parent().find(".bt_bb_iconpicker_select_text").html(""),a(this).closest(".bt_bb_iconpicker").find("input").val(""),a(this).closest(".bt_bb_iconpicker").find("input").trigger("change"),a(this).parent().next().find("input").val("").trigger("keyup"),a(this).parent().next().hide(),a(this).parent().next().next().hide(),a(this).hide()}),a("body").on("keyup",".bt_bb_iconpicker_widget_container .bt_bb_filter",function(t){var b=a(this).val();a(this).closest(".bt_bb_iconpicker").find(".bt_bb_iconpicker_icons .bt_bb_icon_preview").each(function(){var t=a(this).attr("title");new RegExp(b,"i").test(t)?a(this).show():a(this).hide()})})}),a(window).on("focus",function(){var t=localStorage.getItem("bt_bb_cb_items");bt_bb_set_number_items(null===t?0:t)}),window.bt_bb_b64EncodeUnicode=function(t){return btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(t,b){return String.fromCharCode(parseInt(b,16))}))},window.bt_bb_b64DecodeUnicode=function(t){return decodeURIComponent(Array.prototype.map.call(atob(t),function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))}}]);